"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.booleanize = void 0;
const utilz_1 = require("./utilz");
const DEFAULT_PREFIXES = ["is", "has", "are", "can", "should"];
const booleanize = (opts = { startingWith: DEFAULT_PREFIXES }) => {
    return (req, res, next) => {
        const keys = Object.keys(req.query);
        keys.forEach(key => {
            const found = opts.startingWith.find(prefix => key.startsWith(prefix));
            if (found && (0, utilz_1.isCamel)(key)) {
                const val = req.query[key];
                req.query[key] = checkVal(val);
            }
        });
        next();
    };
};
exports.booleanize = booleanize;
const checkVal = (val) => {
    const isTrueValid = val === 'true' || val == 1;
    const isFalseValid = val === 'false' || val == 0 || val == -1;
    const isValid = isTrueValid || isFalseValid;
    if (!isValid) {
        return val;
    }
    return isTrueValid;
};
//# sourceMappingURL=index.js.map